---
backlinks: []
date: 2022-05-24 00:00:33 +0900
published: true
---

# GitHub Pagesのローカル開発環境を用意する

[[＃やりたい]]

- 今まで[[ちくわのノート]]の開発は、とりあえず変えてみてpushしてどうなるか試す形を取っていた
- [ちくわのノートの更新を知る | ちくわのノート](https://note.chikuwa111.com/%E3%81%A1%E3%81%8F%E3%82%8F%E3%81%AE%E3%83%8E%E3%83%BC%E3%83%88%E3%81%AE%E6%9B%B4%E6%96%B0%E3%82%92%E7%9F%A5%E3%82%8B)でコミットを購読するといい、と言ってしまったので無闇やたらにコミットできなくなった
  - そもそも[[ちくわのノート]]があることをみんなに伝えた時点で、とりあえず本番環境で試してみる、という手段は取るべきではない
- [[ちくわのノートのリスト表示の余白を小さくする]]など改善したいことはあるので、ローカルで確認しながら開発したい
- ローカル環境を汚染したくないので[[VSCode]]のRemote Containersやせめて[[Docker]]を使って用意したい

[[＃やった]]

- だいぶハマった
- 結論
  - https://github.com/chikuwa111/note#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E9%96%8B%E7%99%BA
  - buildとserveを分けた
    - buildは[[Jekyll]]の公式イメージ`jekyll/jekyll:pages`ベース
    - serveは[[Nginx]]ベース
- メモ
  - volumeマウントして`jekyll serve`はダメだった
    - 参考: [DockerでJekyllのイメージを動かそうと思ったらエラーで起動しない[解決]｜sistersatori｜note](https://note.com/sistersatori/n/nf2e6660661df)
      - どうやら`jekyll/jekyll:pages`には`webrick`が入ってないっぽい
      - また、[[WSL]]だとwatchが使えないことも知った
      - `jekyll/jekyll`のimageを使う手があったかもしれないが、その場合`Gemfile`を用意しないといけなくて早々に選択肢から外した
  - build時に`GitHub Metadata: No GitHub API authentication could be found. Some fields may be missing or have incorrect data.`ってwarningが出るけど大してGitHubのメタデータ使ってないから無視した
  - [[Nginx]]で拡張子`html`を補完してあげる設定をするのも苦戦した
    - 参考ページ
      - [How do I remove the file extension from URLs in nginx? - Stack Overflow](https://stackoverflow.com/questions/38188963/how-do-i-remove-the-file-extension-from-urls-in-nginx)
      - [Nginx - Official Image | Docker Hub](https://hub.docker.com/_/nginx)
  - [[Docker Compose]]も[[Nginx]]も触るの久しぶりすぎて大変だったけど楽しかった
  - `try_files $uri $uri/ $uri.html =404;`の`$uri/`って要らないんじゃない？って思ったけど消すとHomeが404になってしまった

[//begin]: # "Autogenerated link references for markdown compatibility"
[＃やりたい]: ＃やりたい "＃やりたい"
[ちくわのノート]: ちくわのノート "ちくわのノート"
[ちくわのノート]: ちくわのノート "ちくわのノート"
[ちくわのノートのリスト表示の余白を小さくする]: ちくわのノートのリスト表示の余白を小さくする "ちくわのノートのリスト表示の余白を小さくする"
[Jekyll]: Jekyll "Jekyll"
[//end]: # "Autogenerated link references"